<?xml version="1.0" encoding="UTF-8"?>
<!-- This is a code snippets export file generated by the Code Snippets WordPress plugin. -->
<!-- https://wordpress.org/plugins/code-snippets -->
<!-- To import these snippets a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Install the Code Snippets plugin using the directions provided at the above link. -->
<!-- 3. Go to 'Tools: Import' in the WordPress admin panel. -->
<!-- 4. Click on the "Code Snippets" importer in the list -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. Code Snippets will then import all of the snippets and associated information contained in this file into your site. -->
<!-- 7. You will then have to visit the 'Snippets: All Snippets' admin menu and activate desired snippets. -->
<!-- generator="Code Snippets/2.8.6" created="2017-08-14 20:26" -->
<snippets>
  <snippet scope="1">
    <name>Disable self pings on multisite</name>
    <desc></desc>
    <tags>pingbacks, pings, multisite, wordpress</tags>
    <code>function multisite_no_self_ping( &amp;$links ) {&#13;
    $sites     = get_sites();&#13;
    $site_urls = array();&#13;
    foreach ( $sites as $site ) {&#13;
        $site_urls[] = get_home_url( $site-&gt;blog_id );&#13;
    }&#13;
    foreach ( $links as $key =&gt; $link ) {&#13;
        foreach ( $site_urls as $site_url ) {&#13;
            if ( 0 === strpos( $link, $site_url ) ) {&#13;
                unset( $links[ $key ] );&#13;
            }&#13;
        }&#13;
    }&#13;
}&#13;
add_action( 'pre_ping', 'multisite_no_self_ping' );&#13;
</code>
  </snippet>
</snippets>
