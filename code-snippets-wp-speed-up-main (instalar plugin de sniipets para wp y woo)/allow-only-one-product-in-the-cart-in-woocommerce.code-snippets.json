{"generator":"Code Snippets v2.14.1","date_created":"2021-06-01 19:57","snippets":[{"name":"Allow only one product in the cart in WooCommerce","desc":"https:\/\/stackoverflow.com\/questions\/67785036\/issue-allow-only-one-product-in-woocommerce-cart","tags":["only","one","product","cart","woocommerce"],"scope":"front-end","code":"\/\/ Used to calculate totals\nfunction action_woocommerce_before_calculate_totals( $cart ) {\n    if ( is_admin() && ! defined( 'DOING_AJAX' ) )\n        return;\n\n    if ( did_action( 'woocommerce_before_calculate_totals' ) >= 2 )\n        return;\n    \n    \/\/ Get cart\n    $get_cart = $cart->get_cart();\n\n    \/\/ Solution for PHP 7.3 and up\n    foreach ( $get_cart as $cart_item_key => $cart_item ) {\n        \/\/ NOT last element\n        if ( $cart_item_key !== array_key_last( $get_cart ) ) {\n            \/\/ Remove a cart item\n            $cart->remove_cart_item( $cart_item_key );\n        }\n    }\n}\nadd_action( 'woocommerce_before_calculate_totals', 'action_woocommerce_before_calculate_totals', 10, 1 );","priority":"10"}]}