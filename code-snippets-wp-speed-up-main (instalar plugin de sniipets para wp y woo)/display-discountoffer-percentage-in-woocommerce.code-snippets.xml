<?xml version="1.0" encoding="UTF-8"?>
<!-- This is a code snippets export file generated by the Code Snippets WordPress plugin. -->
<!-- https://wordpress.org/plugins/code-snippets -->
<!-- To import these snippets a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Install the Code Snippets plugin using the directions provided at the above link. -->
<!-- 3. Go to 'Tools: Import' in the WordPress admin panel. -->
<!-- 4. Click on the "Code Snippets" importer in the list -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. Code Snippets will then import all of the snippets and associated information contained in this file into your site. -->
<!-- 7. You will then have to visit the 'Snippets: All Snippets' admin menu and activate desired snippets. -->
<!-- generator="Code Snippets/2.9.4" created="2017-09-29 17:14" -->
<snippets>
  <snippet scope="2">
    <name>Display discount/offer percentage in WooCommerce</name>
    <desc></desc>
    <tags>display, discount, sales, percentage, woocommerce</tags>
    <code>add_filter('woocommerce_sale_flash', 'wc_savings_on_sales_flash');&#13;
&#13;
function wc_savings_on_sales_flash() {&#13;
	global $post, $product;&#13;
   $sale_flash = '';&#13;
	&#13;
	if ($product-&gt;is_on_sale() &amp;&amp; $product-&gt;product_type == 'variable') {&#13;
		$available_variations = $product-&gt;get_available_variations();								&#13;
		$maximumper = 0;&#13;
		&#13;
	  	for ($i = 0; $i &lt; count($available_variations); ++$i) {&#13;
			$variation_id=$available_variations[$i]['variation_id'];&#13;
			$variable_product1= new WC_Product_Variation( $variation_id );&#13;
			$regular_price = $variable_product1 -&gt;regular_price;&#13;
			$sales_price = $variable_product1 -&gt;sale_price;&#13;
			$percentage= round((( ( $regular_price - $sales_price ) / $regular_price ) * 100),1) ;&#13;
			&#13;
		  	if ($percentage &gt; $maximumper) {&#13;
				$maximumper = $percentage;&#13;
			}&#13;
		}&#13;
	  &#13;
		$savings = $price . sprintf( __('%s', 'woocommerce' ), $maximumper . '%' );&#13;
	} else if ($product-&gt;is_on_sale() &amp;&amp; $product-&gt;product_type == 'simple') {&#13;
		$percentage = round( ( ( $product-&gt;regular_price - $product-&gt;sale_price ) / $product-&gt;regular_price ) * 100 );&#13;
		$savings = $price . sprintf( __('%s', 'woocommerce' ), $percentage . '%' );&#13;
	}&#13;
  &#13;
  	if ($product-&gt;is_on_sale()) {&#13;
  		$sale_flash = '&lt;span class="onsale"&gt;' . $savings . ' OFF&lt;/span&gt;';&#13;
	}&#13;
  &#13;
  	return $sale_flash;&#13;
}</code>
  </snippet>
</snippets>
