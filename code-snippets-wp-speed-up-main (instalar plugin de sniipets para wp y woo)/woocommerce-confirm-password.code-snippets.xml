<?xml version="1.0" encoding="UTF-8"?>
<!-- This is a code snippets export file generated by the Code Snippets WordPress plugin. -->
<!-- https://wordpress.org/plugins/code-snippets -->
<!-- To import these snippets a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Install the Code Snippets plugin using the directions provided at the above link. -->
<!-- 3. Go to 'Tools: Import' in the WordPress admin panel. -->
<!-- 4. Click on the "Code Snippets" importer in the list -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. Code Snippets will then import all of the snippets and associated information contained in this file into your site. -->
<!-- 7. You will then have to visit the 'Snippets: All Snippets' admin menu and activate desired snippets. -->
<!-- generator="Code Snippets/2.8.6" created="2017-06-14 16:11" -->
<snippets>
  <snippet scope="2">
    <name>WooCommerce Confirm Password</name>
    <desc></desc>
    <tags>woocommerce</tags>
    <code>// Add a second password field to the checkout page.&#13;
add_action( 'woocommerce_checkout_init', 'wc_add_confirm_password_checkout', 10, 1 );&#13;
function wc_add_confirm_password_checkout( $checkout ) {&#13;
	if ( get_option( 'woocommerce_registration_generate_password' ) == 'no' ) {&#13;
		$checkout-&gt;checkout_fields['account']['account_password2'] = array(&#13;
			'type' 		=&gt; 'password',&#13;
			'label' 	=&gt; __( 'Confirm password', 'woocommerce' ),&#13;
			'required'      =&gt; true,&#13;
			'placeholder' 	=&gt; _x( 'Confirm Password', 'placeholder', 'woocommerce' )&#13;
		);&#13;
	}&#13;
}&#13;
// Check the password and confirm password fields match before allow checkout to proceed.&#13;
add_action( 'woocommerce_after_checkout_validation', 'wc_check_confirm_password_matches_checkout', 10, 2 );&#13;
function wc_check_confirm_password_matches_checkout( $posted ) {&#13;
	$checkout = WC()-&gt;checkout;&#13;
	if ( ! is_user_logged_in() &amp;&amp; ( $checkout-&gt;must_create_account || ! empty( $posted['createaccount'] ) ) ) {&#13;
		if ( strcmp( $posted['account_password'], $posted['account_password2'] ) !== 0 ) {&#13;
			wc_add_notice( __( 'Passwords do not match.', 'woocommerce' ), 'error' );&#13;
		}&#13;
	}&#13;
}</code>
  </snippet>
</snippets>
