<?xml version="1.0" encoding="UTF-8"?>
<!-- This is a code snippets export file generated by the Code Snippets WordPress plugin. -->
<!-- https://wordpress.org/plugins/code-snippets -->
<!-- To import these snippets a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Install the Code Snippets plugin using the directions provided at the above link. -->
<!-- 3. Go to 'Tools: Import' in the WordPress admin panel. -->
<!-- 4. Click on the "Code Snippets" importer in the list -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. Code Snippets will then import all of the snippets and associated information contained in this file into your site. -->
<!-- 7. You will then have to visit the 'Snippets: All Snippets' admin menu and activate desired snippets. -->
<!-- generator="Code Snippets/2.9.2" created="2017-09-07 19:07" -->
<snippets>
  <snippet scope="2">
    <name>Simplify WooCommerce checkout fields for free checkouts</name>
    <desc></desc>
    <tags>free, checkout, fields, woocommerce</tags>
    <code>/**&#13;
 * Removes coupon form, order notes, and several billing fields if the checkout doesn't require payment&#13;
 * Tutorial: http://skyver.ge/c&#13;
 */&#13;
function sv_free_checkout_fields() {&#13;
	&#13;
	// Bail we're not at checkout, or if we're at checkout but payment is needed&#13;
	if ( function_exists( 'is_checkout' ) &amp;&amp; ( ! is_checkout() || ( is_checkout() &amp;&amp; WC()-&gt;cart-&gt;needs_payment() ) ) ) {&#13;
		return;&#13;
	}&#13;
	&#13;
	// remove coupon forms since why would you want a coupon for a free cart??&#13;
	remove_action( 'woocommerce_before_checkout_form', 'woocommerce_checkout_coupon_form', 10 );&#13;
	&#13;
	// Remove the "Additional Info" order notes&#13;
	add_filter( 'woocommerce_enable_order_notes_field', '__return_false' );&#13;
&#13;
	// Unset the fields we don't want in a free checkout&#13;
	function unset_unwanted_checkout_fields( $fields ) {&#13;
	&#13;
		// add or remove billing fields you do not want&#13;
		// list of fields: http://docs.woothemes.com/document/tutorial-customising-checkout-fields-using-actions-and-filters/#section-2&#13;
		$billing_keys = array(&#13;
			'billing_company',&#13;
			'billing_phone',&#13;
			'billing_address_1',&#13;
			'billing_address_2',&#13;
			'billing_city',&#13;
			'billing_postcode',&#13;
			'billing_country',&#13;
			'billing_state',&#13;
		);&#13;
&#13;
		// unset each of those unwanted fields&#13;
		foreach( $billing_keys as $key ) {&#13;
			unset( $fields['billing'][$key] );&#13;
		}&#13;
		&#13;
		return $fields;&#13;
	}&#13;
	add_filter( 'woocommerce_checkout_fields', 'unset_unwanted_checkout_fields' );&#13;
	&#13;
	// A tiny CSS tweak for the account fields; this is optional&#13;
	function print_custom_css() {&#13;
		echo '&lt;style&gt;.create-account { margin-top: 6em; }&lt;/style&gt;';&#13;
	}&#13;
	add_action( 'wp_head', 'print_custom_css' );&#13;
}&#13;
add_action( 'wp', 'sv_free_checkout_fields' );</code>
  </snippet>
</snippets>
