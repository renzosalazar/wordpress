{"generator":"Code Snippets v2.14.3","date_created":"2022-03-07 00:19","snippets":[{"name":"Noindex hidden products in WooCommerce and remove from the sitemap in Yoast SEO","desc":"https:\/\/www.welaunch.io\/en\/2021\/02\/no-index-hidden-woocommerce-products-from-yoast\/","tags":["woocommerce","sitemap","sitemaps","xml","hidden","yoast","seo"],"scope":"admin","code":"add_filter( 'wpseo_sitemap_entry', 'wc_remove_hidden_products', 99, 3);\nfunction wc_remove_hidden_products($url, $type, $post) {\n\tif($post->post_type == 'product' && is_object_in_term( $post->ID, 'product_visibility', 'exclude-from-catalog')){\n\t\treturn '';\n\t}\n\treturn $url;\n}\n\nadd_filter('wpseo_robots', 'wc_noindex_hidden_products', 10, 2);\nfunction wc_noindex_hidden_products($robots, $indexable) {\n\t\n\tif(!isset($indexable->model)) {\n\t\treturn $robots;\n\t}\n\n\tif(!isset($indexable->model->object_id)) {\n\t\treturn $robots;\n\t}\n\t\n\tif(is_object_in_term( $indexable->model->object_id, 'product_visibility', 'exclude-from-catalog')){\n\t\t$robots = 'noindex, nofollow';\n\n\t}\n\treturn $robots;\n}","priority":"10"}]}