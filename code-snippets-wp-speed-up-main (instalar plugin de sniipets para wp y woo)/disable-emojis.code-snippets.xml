<?xml version="1.0" encoding="UTF-8"?>
<!-- This is a code snippets export file generated by the Code Snippets WordPress plugin. -->
<!-- https://wordpress.org/plugins/code-snippets -->
<!-- To import these snippets a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Install the Code Snippets plugin using the directions provided at the above link. -->
<!-- 3. Go to 'Tools: Import' in the WordPress admin panel. -->
<!-- 4. Click on the "Code Snippets" importer in the list -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. Code Snippets will then import all of the snippets and associated information contained in this file into your site. -->
<!-- 7. You will then have to visit the 'Snippets: All Snippets' admin menu and activate desired snippets. -->
<!-- generator="Code Snippets/2.8.6" created="2017-07-28 13:41" -->
<snippets>
  <snippet scope="2">
    <name>Disable Emojis</name>
    <desc></desc>
    <tags>emoji, wordpress, performance</tags>
    <code>/**&#13;
 * Disable the emoji's&#13;
 */&#13;
function disable_emojis() {&#13;
	remove_action( 'wp_head', 'print_emoji_detection_script', 7 );&#13;
	remove_action( 'admin_print_scripts', 'print_emoji_detection_script' );&#13;
	remove_action( 'wp_print_styles', 'print_emoji_styles' );&#13;
	remove_action( 'admin_print_styles', 'print_emoji_styles' );	&#13;
	remove_filter( 'the_content_feed', 'wp_staticize_emoji' );&#13;
	remove_filter( 'comment_text_rss', 'wp_staticize_emoji' );	&#13;
	remove_filter( 'wp_mail', 'wp_staticize_emoji_for_email' );&#13;
	add_filter( 'tiny_mce_plugins', 'disable_emojis_tinymce' );&#13;
	add_filter( 'wp_resource_hints', 'disable_emojis_remove_dns_prefetch', 10, 2 );&#13;
}&#13;
add_action( 'init', 'disable_emojis' );&#13;
&#13;
/**&#13;
 * Filter function used to remove the tinymce emoji plugin.&#13;
 * &#13;
 * @param    array  $plugins  &#13;
 * @return   array             Difference betwen the two arrays&#13;
 */&#13;
function disable_emojis_tinymce( $plugins ) {&#13;
	if ( is_array( $plugins ) ) {&#13;
		return array_diff( $plugins, array( 'wpemoji' ) );&#13;
	} else {&#13;
		return array();&#13;
	}&#13;
}&#13;
&#13;
/**&#13;
 * Remove emoji CDN hostname from DNS prefetching hints.&#13;
 *&#13;
 * @param  array  $urls          URLs to print for resource hints.&#13;
 * @param  string $relation_type The relation type the URLs are printed for.&#13;
 * @return array                 Difference betwen the two arrays.&#13;
 */&#13;
function disable_emojis_remove_dns_prefetch( $urls, $relation_type ) {&#13;
	if ( 'dns-prefetch' == $relation_type ) {&#13;
		/** This filter is documented in wp-includes/formatting.php */&#13;
		$emoji_svg_url = apply_filters( 'emoji_svg_url', __return_false );&#13;
&#13;
		$urls = array_diff( $urls, array( $emoji_svg_url ) );&#13;
	}&#13;
&#13;
	return $urls;&#13;
}</code>
  </snippet>
</snippets>
